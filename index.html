<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Sportkoppel planen" />
    <meta name="author" content="fdagner" />
    <title>Sportkoppel-Planer</title>
    <script src="js/script.js" defer></script>
    <script src="js/drag-drop-touch.esm.min.js" type="module"></script>
    <link rel="stylesheet" href="css/style.css" />
</head>

<body>
    <h1>
        <svg xmlns="http://www.w3.org/2000/svg"
            style="margin-bottom: -10px; width: 40px; fill: #007bff;margin-right: 5px;"
            viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
            <path
                d="M481.3 424.1L409.7 419.3C404.5 419 399.4 420.4 395.2 423.5C391 426.6 388 430.9 386.8 436L369.2 505.6C353.5 509.8 337 512 320 512C303 512 286.5 509.8 270.8 505.6L253.2 436C251.9 431 248.9 426.6 244.8 423.5C240.7 420.4 235.5 419 230.3 419.3L158.7 424.1C141.1 396.9 130.2 364.9 128.3 330.5L189 292.3C193.4 289.5 196.6 285.3 198.2 280.4C199.8 275.5 199.6 270.2 197.7 265.4L171 198.8C192 173.2 219.3 153 250.7 140.9L305.9 186.9C309.9 190.2 314.9 192 320 192C325.1 192 330.2 190.2 334.1 186.9L389.3 140.9C420.6 153 448 173.2 468.9 198.8L442.2 265.4C440.3 270.2 440.1 275.5 441.7 280.4C443.3 285.3 446.6 289.5 450.9 292.3L511.6 330.5C509.7 364.9 498.8 396.9 481.2 424.1zM320 576C461.4 576 576 461.4 576 320C576 178.6 461.4 64 320 64C178.6 64 64 178.6 64 320C64 461.4 178.6 576 320 576zM334.1 250.3C325.7 244.2 314.3 244.2 305.9 250.3L258 285C249.6 291.1 246.1 301.9 249.3 311.8L267.6 368.1C270.8 378 280 384.7 290.4 384.7L349.6 384.7C360 384.7 369.2 378 372.4 368.1L390.7 311.8C393.9 301.9 390.4 291.1 382 285L334.1 250.2z" />
        </svg>Sportkoppel-Planer
    </h1>

    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('koppelTab')">
            Start
        </button>
        <button class="tab-btn" onclick="openTab('inputTab')">
            Klassendaten
        </button>
        <button class="tab-btn" onclick="openTab('settingsTab')">
            Einstellungen
        </button>
        <button class="tab-btn" onclick="openTab('outputTab')">Koppeln</button>
    </div>
    <div id="koppelTab" class="tab-content">
        <div class="input-section">
            <h2>Start</h2>
            <div class="info-box">
                <div class="info-text">
                    <ul><li>Der Planer unterst√ºtzt bei der Organisation des
                    geschlechtergetrennten Sportunterrichts, indem er Klassen anhand
                    ihrer Sch√ºlerzahlen automatisch in passende Gruppen (Koppeln)
                    einteilt.</li>
                    <li>Die Daten lassen sich einfach per Formular oder CSV-Datei
                    eingeben. √úber flexible Einstellungen ‚Äì z.‚ÄØB. Gruppengr√∂√üen und
                    verf√ºgbare Hallen ‚Äì kann die Planung an die √∂rtlichen Gegebenheiten
                    angepasst werden.</li>
                    <li>Nach der automatischen Berechnung werden die
                    Koppeln √ºbersichtlich dargestellt. Per Drag & Drop lassen sich
                    einzelne Klassen verschieben oder gezielt zus√§tzliche
                    Hallenkapazit√§ten aktivieren, um die Planung bei Bedarf manuell zu
                    optimieren.</li>
                    </ul>
                </div>
            </div>
            <h3>Beispiel</h3>
            <div class="image-wrapper">
                <img src="img/koppeln.gif" style="width: 800px;max-width: 99%" alt="Beispielhafte Darstellung der Koppelberechnung" />
            </div>
        </div>
    </div>
    <!-- üü¢ Eingabe-Tab -->
    <div id="inputTab" class="tab-content" style="display: none">
        <div class="input-section">
            <h2>Dateneingabe</h2>
            <div class="info-box">
                <div class="info-text">
                    <ul><li>Sie k√∂nnen die Klassendaten √ºber eine CSV-Datei einspielen.
                        <li>Alternativ k√∂nnen Sie Klassen manuell hinzuf√ºgen.</li>
                    <li>Alle Daten k√∂nnen Sie sp√§ter noch anpassen. Die Speicherung der Daten erfolgt lokal im Browser.</li><br />Beispiel f√ºr eine CSV:<br />
                    <code>Klasse;w;m<br />
              5A;12;14<br />
              6B;10;15</code><br />
                </div>
            </div>
            <br />
            <div class="inputdata">
                <h3>CSV-Import</h3>
                <div id="upload-area">
                    <p>Datei hierher ziehen oder klicken zum Hochladen</p>
                    <input type="file" id="csvFile" accept=".csv" />
                    <span id="fileName">Keine Datei gew√§hlt</span>
                </div><br>
                <button onclick="uploadCSV()"><svg xmlns="http://www.w3.org/2000/svg" style="width: 25px;fill: #fff;margin-bottom: -8px" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M352 173.3L352 384C352 401.7 337.7 416 320 416C302.3 416 288 401.7 288 384L288 173.3L246.6 214.7C234.1 227.2 213.8 227.2 201.3 214.7C188.8 202.2 188.8 181.9 201.3 169.4L297.3 73.4C309.8 60.9 330.1 60.9 342.6 73.4L438.6 169.4C451.1 181.9 451.1 202.2 438.6 214.7C426.1 227.2 405.8 227.2 393.3 214.7L352 173.3zM320 464C364.2 464 400 428.2 400 384L480 384C515.3 384 544 412.7 544 448L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 448C96 412.7 124.7 384 160 384L240 384C240 428.2 275.8 464 320 464zM464 488C477.3 488 488 477.3 488 464C488 450.7 477.3 440 464 440C450.7 440 440 450.7 440 464C440 477.3 450.7 488 464 488z"/></svg> CSV importieren</button>
            </div>
            <br /><br />
            <div class="inputdata">
                <h3>Manuelle Eingabe</h3>
                <div style="display: none">
                    <label>Jahrgangsstufe (optional):</label><br />
                    <input type="text" id="yearGroup" placeholder="z.B. 5 (wird automatisch aus Klasse erkannt)"
                        style="display: none" />
                    <div class="info-box">
                        <div class="info-text">
                            Optional: Jahrgangsstufe eingeben, falls nicht automatisch
                            erkannt werden soll.
                        </div>
                    </div>
                </div>
                <label>Klasse:</label><br />
                <input type="text" id="className" />
                <small>Geben Sie den Klassennamen ein, z. B. 5A oder 7B.</small><br />
                <label>Weiblich:</label><br />
                <input type="number" id="femaleCount" min="0" value="0" />
                <small>Anzahl der weiblichen Sch√ºler in dieser Klasse.</small><br />

                <label>M√§nnlich:</label><br />
                <input type="number" id="maleCount" min="0" value="0" />
                <small>Anzahl der m√§nnlichen Sch√ºler in dieser Klasse.</small><br /><br>
                <button onclick="addClass()"><svg xmlns="http://www.w3.org/2000/svg" style="width: 25px;fill: #fff;margin-bottom: -8px" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"/></svg> Klasse hinzuf√ºgen</button>
            </div>

            <h2>Klassen</h2>
            <table id="classTable">
                <thead>
                    <tr>
                        <th></th>
                        <th>Jgst.</th>
                        <th>Klasse</th>
                        <th>Weiblich</th>
                        <th>M√§nnlich</th>
                        <th>Aktion</th>
                    </tr>
                </thead>
                <tbody id="classTableBody"></tbody>
            </table><br>
            <button onclick="clearData()"><svg xmlns="http://www.w3.org/2000/svg" style="width: 25px;fill: #fff;margin-bottom: -8px" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"/></svg> Daten zur√ºcksetzen</button>
        </div>
    </div>
    <!-- ‚öôÔ∏è Einstellungen-Tab -->
    <div id="settingsTab" class="tab-content" style="display: none">
        <div class="output-section">
            <h2>Einstellungen</h2>
            <div class="info-box">
                <div class="info-text">
                    <ul><li>Tragen Sie hier ein, wie viele Hallen maximal f√ºr eine einzelne
                    Koppel genutzt werden sollen.</li>
                    <li>Wenn beispielsweise insgesamt 4 Hallen verf√ºgbar sind, ist es oft sinnvoller, f√ºr jede Koppel nur 2 oder 3 Hallen zu reservieren.</li>
                    <li>Zus√§tzliche Hallenkapazit√§ten, die nur zeitweise oder teilweise genutzt werden k√∂nnen, lassen sich sp√§ter √ºber manuelles Verschieben ber√ºcksichtigen.</li>
                    </ul>
                </div>
            </div>
            <label for="halls">Verf√ºgbare Hallen je Koppel:</label><br />
            <input type="number" id="halls" min="2" value="2" /><br />

            <label for="maxSize">Maximale Sch√ºlerzahl je Koppel:</label><br />
            <input type="number" id="maxSize" min="1" value="30" /><br />
            <label for="minSize">Mindestanzahl Sch√ºler je Koppel:</label><br />
            <input type="number" id="minSize" min="1" value="12" /><br /><br>
            <button onclick="saveSettings()"><svg xmlns="http://www.w3.org/2000/svg" style="width: 25px;fill: #fff;margin-bottom: -8px" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M160 96C124.7 96 96 124.7 96 160L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 237.3C544 220.3 537.3 204 525.3 192L448 114.7C436 102.7 419.7 96 402.7 96L160 96zM192 192C192 174.3 206.3 160 224 160L384 160C401.7 160 416 174.3 416 192L416 256C416 273.7 401.7 288 384 288L224 288C206.3 288 192 273.7 192 256L192 192zM320 352C355.3 352 384 380.7 384 416C384 451.3 355.3 480 320 480C284.7 480 256 451.3 256 416C256 380.7 284.7 352 320 352z"/></svg> Speichern</button>
        </div>
    </div>
    <!-- üìä Ausgabe-Tab -->
    <div id="outputTab" class="tab-content" style="display: none">
        <div class="output-section">
            <h2>Ergebnis</h2>
            <div class="info-box">
                <div class="info-text">
                    <ul><li>Sie k√∂nnen Klassen per Drag & Drop (nur mit einer Maus) zwischen den Koppeln verschieben, um individuelle Anpassungen vorzunehmen.</li>
                    <li>Sie k√∂nnen Klassen zusammenlegen oder trennen, falls eine andere Koppel sinnvoll erscheint.</li>
                    <li>Zus√§tzlich k√∂nnen Sie in der Tabelle f√ºr jede Koppel weitere Hallenkapazit√§ten erzwingen, falls z.‚ÄØB. Hallen zus√§tzlich zur Verf√ºgung steht.</li>
                    <li>Fertig geplante Koppeln k√∂nnen gesperrt werden. Sie bleiben auch bei einer Neuberechnung erhalten.</li>
                    </ul>
                </div>
            </div>
            <button onclick="calculateCouples()" title="Koppeln berechnen und verteilen"><svg xmlns="http://www.w3.org/2000/svg" style="width: 25px;fill: #fff;margin-bottom: -8px"  viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M467.8 98.4C479.8 93.4 493.5 96.2 502.7 105.3L566.7 169.3C572.7 175.3 576.1 183.4 576.1 191.9C576.1 200.4 572.7 208.5 566.7 214.5L502.7 278.5C493.5 287.7 479.8 290.4 467.8 285.4C455.8 280.4 448 268.9 448 256L448 224L416 224C405.9 224 396.4 228.7 390.4 236.8L358 280L318 226.7L339.2 198.4C357.3 174.2 385.8 160 416 160L448 160L448 128C448 115.1 455.8 103.4 467.8 98.4zM218 360L258 413.3L236.8 441.6C218.7 465.8 190.2 480 160 480L96 480C78.3 480 64 465.7 64 448C64 430.3 78.3 416 96 416L160 416C170.1 416 179.6 411.3 185.6 403.2L218 360zM502.6 534.6C493.4 543.8 479.7 546.5 467.7 541.5C455.7 536.5 448 524.9 448 512L448 480L416 480C385.8 480 357.3 465.8 339.2 441.6L185.6 236.8C179.6 228.7 170.1 224 160 224L96 224C78.3 224 64 209.7 64 192C64 174.3 78.3 160 96 160L160 160C190.2 160 218.7 174.2 236.8 198.4L390.4 403.2C396.4 411.3 405.9 416 416 416L448 416L448 384C448 371.1 455.8 359.4 467.8 354.4C479.8 349.4 493.5 352.2 502.7 361.3L566.7 425.3C572.7 431.3 576.1 439.4 576.1 447.9C576.1 456.4 572.7 464.5 566.7 470.5L502.7 534.5z"/></svg> Koppeln berechnen</button> 
            <div id="error" class="error"></div>
            <div id="warning" class="warning"></div>
            <div class="debug-info" id="debugInfo" style="display: none">
                Debug: Keine Drag-Operationen gestartet
            </div>
            <table id="coupleTable">
                <thead>
                    <tr>
                        <th>Koppel</th>
                        <th><svg xmlns="http://www.w3.org/2000/svg"  style="width: 25px;margin-bottom: -3px" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M208 240C208 178.1 258.1 128 320 128C381.9 128 432 178.1 432 240C432 301.9 381.9 352 320 352C258.1 352 208 301.9 208 240zM351.9 413.1C433.9 398.1 496 326.3 496 240C496 142.8 417.2 64 320 64C222.8 64 144 142.8 144 240C144 326.3 206.1 398.1 288.1 413.1C288 414.1 288 415 288 416L288 480L256 480C238.3 480 224 494.3 224 512C224 529.7 238.3 544 256 544L288 544L288 576C288 593.7 302.3 608 320 608C337.7 608 352 593.7 352 576L352 544L384 544C401.7 544 416 529.7 416 512C416 494.3 401.7 480 384 480L352 480L352 416C352 415 352 414.1 351.9 413.1z"/></svg> Weiblich</th>
                        <th><svg xmlns="http://www.w3.org/2000/svg" style="width: 25px;margin-bottom: -3px" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M384 96C384 78.3 398.3 64 416 64L544 64C561.7 64 576 78.3 576 96L576 224C576 241.7 561.7 256 544 256C526.3 256 512 241.7 512 224L512 173.3L417 268.3C436.5 296.7 448 331 448 368.1C448 465.3 369.2 544.1 272 544.1C174.8 544.1 96 465.2 96 368C96 270.8 174.8 192 272 192C309 192 343.4 203.4 371.8 223L466.8 128L416.1 128C398.4 128 384.1 113.7 384.1 96zM272 480C333.9 480 384 429.9 384 368C384 306.1 333.9 256 272 256C210.1 256 160 306.1 160 368C160 429.9 210.1 480 272 480z"/></svg> M√§nnlich</th>
                        <th>Sperren</th>
                        <!-- Neue Spalte -->
                    </tr>
                </thead>
                <tbody id="coupleTableBody"></tbody>
            </table><br><button onclick="exportCouplesToCSV()" title="Koppeln als CSV exportieren"><svg xmlns="http://www.w3.org/2000/svg" style="width: 25px;fill: #fff;margin-bottom: -8px" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M352 96C352 78.3 337.7 64 320 64C302.3 64 288 78.3 288 96L288 306.7L246.6 265.3C234.1 252.8 213.8 252.8 201.3 265.3C188.8 277.8 188.8 298.1 201.3 310.6L297.3 406.6C309.8 419.1 330.1 419.1 342.6 406.6L438.6 310.6C451.1 298.1 451.1 277.8 438.6 265.3C426.1 252.8 405.8 252.8 393.3 265.3L352 306.7L352 96zM160 384C124.7 384 96 412.7 96 448L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 448C544 412.7 515.3 384 480 384L433.1 384L376.5 440.6C345.3 471.8 294.6 471.8 263.4 440.6L206.9 384L160 384zM464 440C477.3 440 488 450.7 488 464C488 477.3 477.3 488 464 488C450.7 488 440 477.3 440 464C440 450.7 450.7 440 464 440z"/></svg> CSV herunterladen</button>
        </div>
    </div>
    <footer>
<div><p><a href="https://oer.fdagner.de">Startseite</a> ¬∑ <a href="https://github.com/fdagner/sportkoppeln">Download & Repository</a> ¬∑ <a
          href="https://oer.fdagner.de/impressum/">Impressum</a> ¬∑ 
          <a href="https://oer.fdagner.de/datenschutz/">Datenschutz</a><br><br>
      </p>
  </div>
</footer>
</body>

</html>